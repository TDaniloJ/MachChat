<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Personagem - ChatPersonas</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/criar.css">
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="navbar-left">
            <a href="index.html" class="logo">
                💬 ChatPersonas
            </a>
            <a href="index.html" class="back-btn">
                ← Voltar
            </a>
        </div>
        <div class="navbar-right">
            <div class="coins-display">
                🪙 <span id="userCoins">250</span>
            </div>
        </div>
    </nav>

    <!-- LAYOUT PRINCIPAL -->
    <div class="main-layout">
        <!-- FORMULÁRIO DE CRIAÇÃO -->
        <div class="creation-form">
            <div class="form-header">
                <h1 class="form-title">Criar Personagem</h1>
                <p class="form-subtitle">Dê vida a um personagem único com personalidade própria</p>
            </div>

            <form id="characterForm">
                <!-- INFORMAÇÕES BÁSICAS -->
                <div class="form-section">
                    <h3 class="section-title">
                        ✨ Informações Básicas
                    </h3>
                    
                    <div class="form-group">
                        <label class="form-label required">Foto do Personagem</label>
                        <div class="photo-upload-section">
                            <div class="photo-upload" id="photoUpload" onclick="document.getElementById('characterPhoto').click()">
                                <input type="file" id="characterPhoto" accept="image/*" onchange="previewCharacterPhoto(this)">
                                <div class="upload-icon">📷</div>
                                <div class="upload-text">Clique para enviar uma foto</div>
                                <div class="upload-hint">JPG, PNG, GIF (máx. 5MB)</div>
                            </div>
                            <div id="photoPreviewContainer" style="display: none;">
                                <div class="photo-preview">
                                    <img id="photoPreview" alt="Preview">
                                    <button type="button" class="photo-remove" onclick="removeCharacterPhoto()">×</button>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 16px;">
                            <label class="form-label">Ou escolha um emoji</label>
                            <div class="emoji-grid" id="emojiGrid">
                                <div class="emoji-option" data-emoji="🌙">🌙</div>
                                <div class="emoji-option" data-emoji="⚡">⚡</div>
                                <div class="emoji-option" data-emoji="🎨">🎨</div>
                                <div class="emoji-option" data-emoji="🔬">🔬</div>
                                <div class="emoji-option" data-emoji="🎭">🎭</div>
                                <div class="emoji-option" data-emoji="🎮">🎮</div>
                                <div class="emoji-option" data-emoji="📚">📚</div>
                                <div class="emoji-option" data-emoji="🎵">🎵</div>
                                <div class="emoji-option" data-emoji="🌟">🌟</div>
                                <div class="emoji-option" data-emoji="🦋">🦋</div>
                                <div class="emoji-option" data-emoji="🔥">🔥</div>
                                <div class="emoji-option" data-emoji="❄️">❄️</div>
                                <div class="emoji-option" data-emoji="🤖">🤖</div>
                                <div class="emoji-option" data-emoji="👑">👑</div>
                                <div class="emoji-option" data-emoji="💎">💎</div>
                                <div class="emoji-option" data-emoji="🗿">🗿</div>
                                <div class="emoji-option" data-emoji="🐺">🐺</div>
                                <div class="emoji-option" data-emoji="🦅">🦅</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Visibilidade</label>
                        <div class="visibility-options">
                            <div class="visibility-option selected" data-visibility="public">
                                <div class="visibility-icon">🌍</div>
                                <div class="visibility-title">Público</div>
                                <div class="visibility-desc">Todos podem ver e conversar</div>
                            </div>
                            <div class="visibility-option" data-visibility="unlisted">
                                <div class="visibility-icon">🔗</div>
                                <div class="visibility-title">Não Listado</div>
                                <div class="visibility-desc">Apenas com link direto</div>
                            </div>
                            <div class="visibility-option" data-visibility="private">
                                <div class="visibility-icon">🔒</div>
                                <div class="visibility-title">Privado</div>
                                <div class="visibility-desc">Apenas você pode usar</div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- NOME E DESCRICAO -->
                <div class="form-section">
                    <h3 class="section-title">
                        📝 Nome e Descrição
                    </h3>

                    <div class="form-group">
                        <label class="form-label required" for="name">Nome do Personagem</label>
                        <input type="text" id="characterName" class="form-input" placeholder="Ex: Luna, Alex, Maya..." required>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="characterDesc">Descrição Breve</label>
                        <input type="text" id="characterDesc" class="form-input" placeholder="Ex: Sábia e misteriosa, ama astronomia e filosofia" required>
                        <div class="char-counter">
                            <span id="descCounter">0</span>/100 caracteres
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="about">Sobre o Personagem</label>
                        <textarea id="about" class="form-textarea" rows="3" placeholder="Descreva o seu personagem..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="characteristics">Características do Personagem</label>
                        <textarea id="characteristics" class="form-textarea" rows="3" placeholder="Descreva o seu personagem..."></textarea>
                    </div>


                </div>

                <!-- PERSONALIDADE -->
                <div class="form-section">
                    <h3 class="section-title">
                        🧠 Personalidade
                    </h3>
                    
                    <div class="form-group">
                        <label class="form-label required" for="personalityDesc">Descrição Detalhada do Personagem</label>
                        <textarea id="personalityDesc" class="form-textarea" rows="6" 
                            placeholder="Descreva a personalidade, características, modo de falar, história de fundo e comportamentos únicos do seu personagem. Esta descrição será incluída na memória de longo prazo." required></textarea>
                        <div class="char-counter">
                            <span id="personalityCounter">0</span>/2000 caracteres
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Traços de Personalidade</label>
                        <div class="tags-container" id="personalityTags">
                            <div class="tag" data-trait="Sábia">Sábia</div>
                            <div class="tag" data-trait="Misteriosa">Misteriosa</div>
                            <div class="tag" data-trait="Corajosa">Corajosa</div>
                            <div class="tag" data-trait="Criativa">Criativa</div>
                            <div class="tag" data-trait="Enérgica">Enérgica</div>
                            <div class="tag" data-trait="Analítica">Analítica</div>
                            <div class="tag" data-trait="Empática">Empática</div>
                            <div class="tag" data-trait="Aventureira">Aventureira</div>
                            <div class="tag" data-trait="Contemplativa">Contemplativa</div>
                            <div class="tag" data-trait="Inspiradora">Inspiradora</div>
                            <input type="text" class="tag-input" placeholder="Adicionar..." id="customTraitInput">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Interesses e Hobbies</label>
                        <div class="tags-container" id="interestsTags">
                            <div class="tag" data-interest="Astronomia">Astronomia</div>
                            <div class="tag" data-interest="Filosofia">Filosofia</div>
                            <div class="tag" data-interest="Arte">Arte</div>
                            <div class="tag" data-interest="Ciência">Ciência</div>
                            <div class="tag" data-interest="Aventura">Aventura</div>
                            <div class="tag" data-interest="Música">Música</div>
                            <div class="tag" data-interest="Literatura">Literatura</div>
                            <div class="tag" data-interest="Esportes">Esportes</div>
                            <div class="tag" data-interest="Tecnologia">Tecnologia</div>
                            <div class="tag" data-interest="Culinária">Culinária</div>
                            <input type="text" class="tag-input" placeholder="Adicionar..." id="customInterestInput">
                        </div>
                    </div>
                </div>

                <!-- CENÁRIO -->
                <div class="form-section">
                    <h3 class="section-title">
                        🌍 Cenário
                    </h3>
                    
                    <div class="form-group">
                        <label class="form-label" for="scenario">Circunstâncias e Contexto</label>
                        <textarea id="scenario" class="form-textarea" rows="4" 
                            placeholder="Descreva o cenário atual, o ambiente, a situação em que o personagem se encontra e o contexto da conversa. Ex: Você está em uma biblioteca antiga à meia-noite, rodeada de livros místicos e pergaminhos..."></textarea>
                        <div class="char-counter">
                            <span id="scenarioCounter">0</span>/1000 caracteres
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Imagem de Fundo do Cenário</label>
                        <div class="scenario-upload">
                            <div class="photo-upload" onclick="document.getElementById('scenarioImage').click()">
                                <input type="file" id="scenarioImage" accept="image/*" onchange="previewScenarioImage(this)">
                                <div class="upload-icon">🖼️</div>
                                <div class="upload-text">Upload da imagem de cenário</div>
                                <div class="upload-hint">Esta imagem aparecerá no fundo da conversa</div>
                            </div>
                            <div id="scenarioPreviewContainer" style="display: none;" class="scenario-preview-container">
                                <img id="scenarioPreview" class="scenario-image-preview" alt="Cenário">
                                <button type="button" class="scenario-remove" onclick="removeScenarioImage()">×</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SAUDAÇÃO -->
                <div class="form-section">
                    <h3 class="section-title">
                        💬 Saudação
                    </h3>
                    
                    <div class="form-group">
                        <label class="form-label required" for="greeting">Primeira Mensagem</label>
                        <textarea id="greeting" class="form-textarea" rows="3" 
                            placeholder="A primeira mensagem que o personagem enviará ao iniciar uma conversa. Ex: Olá! Sou Luna, guardiã dos segredos celestiais. As estrelas me trouxeram até você esta noite..." required></textarea>
                        <div class="char-counter">
                            <span id="greetingCounter">0</span>/500 caracteres
                        </div>
                        <div style="font-size: 12px; color: rgba(255, 193, 7, 0.8); margin-top: 8px;">
                            💡 Esta mensagem será incluída apenas na memória de curto prazo
                        </div>
                    </div>
                </div>

                <!-- CONFIGURAÇÕES AVANÇADAS -->
                <div class="form-section">
                    <button type="button" class="advanced-toggle" onclick="toggleAdvanced()">
                        ⚙️ Configurações Avançadas <span id="advancedIcon">▼</span>
                    </button>
                    
                    <div class="advanced-settings" id="advancedSettings">
                        <!-- Cartões de Persona -->
                        <div class="form-group">
                            <label class="form-label">Cartões de Persona</label>
                            <div style="font-size: 12px; color: rgba(255, 255, 255, 0.6); margin-bottom: 12px;">
                                Configurações de identidade do usuário no chat (até 5 cartões)
                            </div>
                            <div class="persona-cards" id="personaCards">
                                <!-- Cartões serão adicionados aqui -->
                            </div>
                            <div class="add-persona-btn" onclick="addPersonaCard()" id="addPersonaBtn">
                                + Cartão de persona
                            </div>
                        </div>

                        <!-- Bolha de Pensamento -->
                        <div class="form-group">
                            <label class="form-label">Bolha de Pensamento</label>
                            <div style="font-size: 12px; color: rgba(255, 255, 255, 0.6); margin-bottom: 12px;">
                                Escolha no máximo 3 valores ao mesmo tempo
                            </div>
                            <div class="thought-bubble">
                                <div class="emotion-sliders" id="emotionSliders">
                                    <div class="emotion-slider">
                                        <div class="emotion-label">😡 Raiva</div>
                                        <input type="range" class="slider" id="angerSlider" min="0" max="100" value="0" data-emotion="anger">
                                        <div class="slider-value"><span id="angerValue">0</span>%</div>
                                    </div>
                                    <div class="emotion-slider">
                                        <div class="emotion-label">❤️ Amor</div>
                                        <input type="range" class="slider" id="loveSlider" min="0" max="100" value="0" data-emotion="love">
                                        <div class="slider-value"><span id="loveValue">0</span>%</div>
                                    </div>
                                    <div class="emotion-slider">
                                        <div class="emotion-label">😤 Excitação</div>
                                        <input type="range" class="slider" id="excitementSlider" min="0" max="100" value="0" data-emotion="excitement">
                                        <div class="slider-value"><span id="excitementValue">0</span>%</div>
                                    </div>
                                    <div class="emotion-slider">
                                        <div class="emotion-label">🙏 Submissão</div>
                                        <input type="range" class="slider" id="submissionSlider" min="0" max="100" value="0" data-emotion="submission">
                                        <div class="slider-value"><span id="submissionValue">0</span>%</div>
                                    </div>
                                    <div class="emotion-slider">
                                        <div class="emotion-label">😠 Ódio</div>
                                        <input type="range" class="slider" id="hateSlider" min="0" max="100" value="0" data-emotion="hate">
                                        <div class="slider-value"><span id="hateValue">0</span>%</div>
                                    </div>
                                </div>
                                <button type="button" class="add-persona-btn" onclick="addCustomEmotion()" style="margin-top: 16px;">
                                    + Adicionar valor personalizado
                                </button>
                            </div>
                        </div>

                        <!-- Configurações de IA -->
                        <div class="form-group">
                            <label class="form-label">Modelo de IA</label>
                            <select id="aiModel" class="form-select">
                                <option value="gpt-4">GPT-4 (Recomendado)</option>
                                <option value="claude-3.5">Claude 3.5 Sonnet</option>
                                <option value="gemini-pro">Gemini Pro</option>
                                <option value="local">Modelo Local</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Criatividade (Temperature)</label>
                            <div class="emotion-slider">
                                <div class="emotion-label">Conservador</div>
                                <input type="range" class="slider" id="temperature" min="0" max="1" step="0.1" value="0.7">
                                <div class="emotion-label">Criativo</div>
                                <div class="slider-value"><span id="tempValue">0.7</span></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Máximo de Tokens</label>
                            <div class="emotion-slider">
                                <div class="emotion-label">Curto</div>
                                <input type="range" class="slider" id="maxTokens" min="100" max="4000" step="100" value="1000">
                                <div class="emotion-label">Longo</div>
                                <div class="slider-value"><span id="tokensValue">1000</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TERMOS -->
                <div class="terms-checkbox">
                    <input type="checkbox" id="acceptTerms" required>
                    <div class="terms-text">
                        Li e aceito as <a href="#" class="terms-link">Diretrizes da Comunidade</a>. 
                        Confirmo que este personagem não viola os termos de uso e é apropriado para a plataforma.
                    </div>
                </div>

                <!-- AÇÕES -->
                <div class="form-actions">
                    <a href="index.html" class="btn btn-secondary">
                        ✕ Cancelar
                    </a>
                    <button type="button" class="btn btn-secondary" onclick="saveAsDraft()">
                        💾 Salvar Rascunho
                    </button>
                    <button type="submit" class="btn btn-primary">
                        ✨ Criar Personagem
                    </button>
                </div>
            </form>
        </div>

        <!-- PREVIEW LATERAL -->
        <div class="preview-sidebar">
            <div class="preview-header">
                <h3 class="preview-title">👁️ Preview</h3>
                <p style="font-size: 12px; color: rgba(255, 255, 255, 0.6);">Como seu personagem aparecerá</p>
            </div>

            <div class="preview-character">
                <div class="preview-avatar" id="previewAvatar">
                    <span id="previewAvatarEmoji">🎭</span>
                </div>
                <div class="preview-name" id="previewName">Nome do Personagem</div>
                <div class="preview-desc" id="previewDesc">Descrição do personagem aparecerá aqui</div>
                
                <div class="preview-badges" id="previewBadges">
                    <span class="preview-badge">Público</span>
                </div>

                <div class="preview-stats">
                    <div class="preview-stat">
                        <div class="preview-stat-value">5.0</div>
                        <div class="preview-stat-label">Rating</div>
                    </div>
                    <div class="preview-stat">
                        <div class="preview-stat-value">0</div>
                        <div class="preview-stat-label">Chats</div>
                    </div>
                    <div class="preview-stat">
                        <div class="preview-stat-value" id="previewTraits">0</div>
                        <div class="preview-stat-label">Traços</div>
                    </div>
                    <div class="preview-stat">
                        <div class="preview-stat-value">Novo</div>
                        <div class="preview-stat-label">Status</div>
                    </div>
                </div>
            </div>

            <div class="preview-scenario" id="previewScenarioSection" style="display: none;">
                <div class="scenario-label">🌍 Cenário</div>
                <div class="scenario-preview" id="previewScenario">
                    Nenhum cenário definido ainda...
                </div>
            </div>

            <div class="preview-scenario">
                <div class="scenario-label">💬 Saudação</div>
                <div class="scenario-preview" id="previewGreeting">
                    Primeira mensagem aparecerá aqui...
                </div>
            </div>

            <div style="text-align: center; margin-top: 24px;">
                <button class="btn btn-primary" onclick="testCharacter()" style="width: 100%;">
                    🧪 Testar Conversa
                </button>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>    